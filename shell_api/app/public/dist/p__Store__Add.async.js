(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[46],{qf7w:function(e,a,t){"use strict";t.r(a);t("IzEo");var n,r,o,l,c=t("bx4M"),p=(t("+L6B"),t("2/Rp")),i=t("jehZ"),s=t.n(i),m=(t("14J3"),t("BMrR")),d=(t("jCWc"),t("kPKH")),u=(t("5NDa"),t("5rEg")),h=(t("miYZ"),t("tsqr")),y=t("p0pE"),f=t.n(y),b=t("2Taf"),v=t.n(b),k=t("vZ4D"),g=t.n(k),E=t("l4Ni"),C=t.n(E),w=t("ujKo"),I=t.n(w),x=t("MhPg"),j=t.n(x),S=(t("y8nQ"),t("Vl3Y")),D=t("q1tI"),M=t.n(D),F=t("MuoO"),N=t("usdK"),O=t("zHco"),T=t("S+sS"),q=S["a"].Item,A=(n=Object(F["connect"])(function(e){var a=e.loading,t=e.store;return{store:t,submitting:a.effects["store/add"]}}),r=S["a"].create(),n(o=r((l=function(e){function a(){var e,t;v()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=C()(this,(e=I()(a)).call.apply(e,[this].concat(r))),t.enhanceComponet=function(e){return Object(T["b"])(f()({},e,{props:t.props}))},t.handleSubmit=function(e){var a=t.props,n=a.dispatch,r=a.form,o=a.match.params;e.preventDefault(),r.validateFieldsAndScroll(function(e,a){if(!e){var t=a;t.avatar=a.avatar.url,t.cityId=a.geographic.city.key,t.provinceId=a.geographic.province.key,o.id&&(t.id=o.id),n({type:"store/".concat(o.id?"update":"add"),payload:t,callback:function(){h["a"].success("\u63d0\u4ea4\u6210\u529f"),N["a"].goBack()}})}})},t}return j()(a,e),g()(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props,t=a.dispatch,n=a.match.params;t({type:"store/leader"}),n.id&&t({type:"store/fetch",payload:{id:n.id},callback:function(){var a=e.props,t=a.store.data.list,n=a.form,r=t[0]||{};Object.keys(n.getFieldsValue()).forEach(function(e){var a={};"avatar"===e&&r[e]?a[e]=[{uid:-1,url:r[e],name:"avatar"}]:a[e]="geographic"===e?{province:{label:r.provinceName||"",key:r.provinceId||""},city:{label:r.cityName||"",key:r.cityId||""}}:r[e]||null,n.setFieldsValue(a)})}})}},{key:"render",value:function(){var e=this.props,a=e.submitting,t=e.match.params,n=e.form.getFieldDecorator,r=this.props.store.leaderList;return M.a.createElement(O["a"],{title:t.id?"\u7f16\u8f91\u95e8\u5e97":"\u6dfb\u52a0\u95e8\u5e97"},M.a.createElement(c["a"],{bordered:!1},M.a.createElement(S["a"],{onSubmit:this.handleSubmit,style:{marginTop:8}},this.enhanceComponet({label:"\u95e8\u5e97\u59d3\u540d",key:"name"}),this.enhanceComponet({type:"upload",label:"\u95e8\u5e97\u7167\u7247",key:"avatar",length:1}),this.enhanceComponet({type:"select",label:"\u95e8\u5e97\u8d1f\u8d23\u4eba",key:"leaderId",options:r.map(function(e){return{value:e.id,name:e.name}})}),this.enhanceComponet({label:"\u8054\u7cfb\u65b9\u5f0f",key:"concat",placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u8054\u7cfb\u65b9\u5f0f"}),this.enhanceComponet({type:"cascader",label:"\u57ce\u5e02\u5730\u533a",key:"geographic"}),this.enhanceComponet({type:"textare",label:null,key:"address",placeholder:"\u8bf7\u8f93\u5165\u5177\u4f53\u5730\u5740\u4f4d\u7f6e",layout:{wrapperCol:{xs:{span:24,offset:0},md:{span:10,offset:7},sm:{span:12,offet:7}}}}),this.enhanceComponet({type:"textare",label:null,key:"enAddress",placeholder:"\u82f1\u6587\u5730\u5740",layout:{wrapperCol:{xs:{span:24,offset:0},md:{span:10,offset:7},sm:{span:12,offet:7}}}}),M.a.createElement(q,s()({},T["a"],{label:"\u7ecf\u7eac\u5ea6\u5750\u6807"}),M.a.createElement(u["a"].Group,null,M.a.createElement(m["a"],{gutter:8},M.a.createElement(d["a"],{span:8},M.a.createElement(q,null,n("lat")(M.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165\u7ecf\u5ea6"})))),M.a.createElement(d["a"],{span:8},M.a.createElement(q,null,n("lon")(M.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165\u7eac\u5ea6"}))))))),this.enhanceComponet({type:"textare",label:"\u95e8\u5e97\u7b80\u4ecb",key:"description"}),this.enhanceComponet({type:"textare",label:"\u6ce8\u610f\u4e8b\u9879",key:"remark"}),M.a.createElement(q,s()({},T["c"],{style:{marginTop:32}}),M.a.createElement(p["a"],{type:"primary",htmlType:"submit",loading:a},"\u63d0\u4ea4"),M.a.createElement(p["a"],{style:{marginLeft:8},onClick:N["b"]},"\u53d6\u6d88")))))}}]),a}(D["PureComponent"]),o=l))||o)||o);a["default"]=A}}]);