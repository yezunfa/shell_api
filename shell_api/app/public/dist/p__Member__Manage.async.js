(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{eqxH:function(e,t,a){"use strict";a.r(t);a("2qtc");var n,i,r,l,o=a("kLXV"),s=(a("5NDa"),a("5rEg")),m=(a("IzEo"),a("bx4M")),c=(a("g9YV"),a("wCAj")),d=(a("fOrg"),a("+KLJ")),u=a("jehZ"),h=a.n(u),p=(a("+L6B"),a("2/Rp")),b=(a("14J3"),a("BMrR")),g=(a("jCWc"),a("kPKH")),y=(a("miYZ"),a("tsqr")),f=(a("/zsF"),a("PArb")),v=a("2Taf"),E=a.n(v),C=a("vZ4D"),S=a.n(C),k=a("l4Ni"),w=a.n(k),x=a("ujKo"),I=a.n(x),D=a("rlhR"),P=a.n(D),R=a("MhPg"),M=a.n(R),L=a("p0pE"),z=a.n(L),K=(a("OaEy"),a("2fM7")),F=(a("y8nQ"),a("Vl3Y")),A=a("q1tI"),T=a.n(A),O=a("MuoO"),j=a("usdK"),B=a("zHco"),H=a("S+sS"),q=F["a"].Item,J=K["a"].Option,N=(n=Object(O["connect"])(function(e){var t=e.member,a=e.loading;return z()({},t,{loading:a.models.member})}),i=F["a"].create(),n(r=i((l=function(e){function t(){var e,a;E()(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return a=w()(this,(e=I()(t)).call.apply(e,[this].concat(i))),a.state={pageSize:10,currentPage:1,selectedRowKeys:[],isShowDistributionModal:!1,memberIds:[],membership:"",handlingPerson:"",distributionReason:""},a.formItemLayout={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},a.searchButtonLayout={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:6}}},a.columns=[{title:"\u4f1a\u5458ID",dataIndex:"id"},{title:"\u6f5c\u5ba2\u59d3\u540d",dataIndex:"name"},{title:"\u5fae\u4fe1\u8d26\u53f7",dataIndex:"wxAccount"},{title:"\u6027\u522b",dataIndex:"gender",filters:[{text:"\u7537",value:"male"},{text:"\u5973",value:"female"}],onFilter:function(e,t){return t.gender===e},render:function(e){return"male"===e?"\u7537":"\u5973"}},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"concat"},{title:"\u6240\u5c5e\u95e8\u5e97",dataIndex:"belongsName"},{title:"\u8ddf\u8fdb\u9500\u552e",dataIndex:"saleName"},{title:"\u8ddf\u8fdb\u65f6\u95f4",dataIndex:"followTime",sorter:!0},{title:"\u64cd\u4f5c",dataIndex:"key",render:function(e,t){return T.a.createElement(A["Fragment"],null,T.a.createElement("a",{onClick:function(){return j["a"].push("/member/manage/".concat(t.id))}},"\u8be6\u60c5"),T.a.createElement(f["a"],{type:"vertical"}),T.a.createElement("a",{onClick:function(){return j["a"].push("/member/add/".concat(t.id))}},"\u7f16\u8f91"),T.a.createElement(f["a"],{type:"vertical"}),T.a.createElement("a",{onClick:a.handleDistributionClick.bind(P()(a),t.id)},"\u5206\u914d\u4f1a\u7c4d"),T.a.createElement(f["a"],{type:"vertical"}),T.a.createElement("a",{onClick:function(){return y["a"].info("\u6682\u672a\u5f00\u653e")}},"\u529e\u5361"))}}],a.handleDistributionClick=function(e){a.setState({isShowDistributionModal:!0,memberIds:[e]})},a.onDistributionConfirm=function(){var e=a.props.dispatch,t=a.state,n=t.memberIds,i=t.membership,r=t.handlingPerson,l=t.distributionReason;e({type:"member/distribution",payload:{ids:n,membership:i,handlingPerson:r,distributionReason:l},callback:function(){return a.setState({isShowDistributionModal:!1,memberIds:[],membership:"",handlingPerson:"",distributionReason:""})}})},a.onDistributionCancel=function(){var e=a.state.isShowDistributionModal;a.setState({isShowDistributionModal:!e})},a.handleMembership=function(e){a.setState({membership:e})},a.handleHandlingPerson=function(e){a.setState({handlingPerson:e.target.value})},a.handleDistributionReason=function(e){a.setState({distributionReason:e.target.value})},a.handlePartDistribution=function(){var e=a.state.selectedRowKeys;a.setState({isShowDistributionModal:!0,memberIds:e})},a.enhanceComponet=function(e){return Object(H["b"])(z()({},e,{props:a.props,layout:a.formItemLayout}))},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.handleTableChange=function(e){var t={currentPage:e.current,pageSize:e.pageSize};a.handleSearch(t)},a.handleFormReset=function(){var e=a.props.form;e.resetFields(),a.handleSearch()},a.handleSearch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pageSize,n=void 0===t?10:t,i=e.currentPage,r=void 0===i?1:i,l=a.props,o=l.dispatch,s=l.form;s.validateFields(function(e,t){e||(a.setState({pageSize:n,currentPage:r}),o({type:"member/getMemberList",payload:t}))})},a}return M()(t,e),S()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"member/getBelongs"}),this.handleSearch()}},{key:"renderSearchForm",value:function(){var e=this.props.belongs;return T.a.createElement(F["a"],null,T.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},T.a.createElement(g["a"],{md:8,sm:24},this.enhanceComponet({label:"\u4f1a\u5458\u5361\u53f7",key:"cardId"})),T.a.createElement(g["a"],{md:8,sm:24},this.enhanceComponet({label:"\u4f1a\u5458\u59d3\u540d",key:"name"})),T.a.createElement(g["a"],{md:8,sm:24},this.enhanceComponet({type:"select",label:"\u4f1a\u5458\u5361\u72b6\u6001",key:"cardStatus",options:[{value:"0",name:"\u505c\u5361"},{value:"1",name:"\u6b63\u5e38"},{value:"2",name:"\u5df2\u8fc7\u671f"}]}))),T.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},T.a.createElement(g["a"],{md:8,sm:24},this.enhanceComponet({type:"select",label:"\u4f1a\u5458\u5361\u7c7b\u578b",key:"cardType",options:[{value:"0",name:"\u671f\u9650\u5361"},{value:"1",name:"\u50a8\u503c\u5361"},{value:"2",name:"\u5957\u5361"}]})),T.a.createElement(g["a"],{md:8,sm:24},this.enhanceComponet({type:"select",label:"\u4f1a\u5458\u5361\u79cd\u7c7b",key:"cardType",options:[{value:"0",name:"\u9ed1\u5361"},{value:"1",name:"\u91d1\u5361"},{value:"2",name:"\u767d\u91d1\u5361"}]})),T.a.createElement(g["a"],{md:8,sm:24},this.enhanceComponet({type:"select",label:"\u6240\u5c5e\u95e8\u5e97",key:"belongs",options:e.map(function(e){return{value:e.id,name:e.name}})}))),T.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},T.a.createElement(g["a"],{md:8,sm:24},this.enhanceComponet({type:"date",label:"\u5230\u671f\u65f6\u95f4",key:"dueTime"})),T.a.createElement(g["a"],{md:8,sm:24},T.a.createElement(q,h()({},this.searchButtonLayout,{style:{textAlign:"right"}}),T.a.createElement(p["a"],{type:"primary",onClick:this.handleSearch},"\u67e5\u8be2"),T.a.createElement(p["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}},{key:"render",value:function(){var e=this.props,t=e.member,a=t.pagination,n=void 0===a?{}:a,i=t.list,r=void 0===i?[]:i,l=e.loading,u=this.state,b=u.pageSize,g=u.currentPage,y=u.selectedRowKeys,f=u.memberIds,v=u.isShowDistributionModal,E=u.membership,C=u.handlingPerson,S=u.distributionReason;return T.a.createElement(B["a"],{title:"\u4f1a\u5458\u7ba1\u7406"},T.a.createElement(m["a"],{bordered:!1},T.a.createElement("div",null,T.a.createElement("div",null,this.renderSearchForm()),T.a.createElement("div",null,T.a.createElement(d["a"],{message:"\u540e\u53f0\u6559\u7ec3\u603b\u6570\u91cf\uff1a".concat(n.total||0,"\u5bb6"),type:"info"})),T.a.createElement("div",{style:{textAlign:"right",margin:"20px 0 20px 0"}},T.a.createElement(p["a"],{disabled:!y.length,onClick:this.handlePartDistribution,style:{marginRight:20}},"\u6279\u91cf\u5206\u914d\u4f1a\u7c4d"),T.a.createElement(p["a"],{icon:"plus",type:"primary",onClick:function(){return j["a"].push("/member/add")}},"\u65b0\u5efa")),T.a.createElement(c["a"],{rowKey:"id",rowSelection:{selectedRowKeys:y,onChange:this.onSelectChange,getCheckboxProps:function(e){return{disabled:0===e.workStatus}}},columns:this.columns,dataSource:r,loading:l,pagination:{pageSize:b,current:g},onChange:this.handleTableChange}))),T.a.createElement(o["a"],{title:f.length>1?"\u6279\u91cf\u5206\u914d\u4f1a\u7c4d":"\u5206\u914d\u4f1a\u7c4d",visible:v,onOk:this.onDistributionConfirm,onCancel:this.onDistributionCancel},T.a.createElement(q,h()({label:"\u5206\u914d\u4f1a\u7c4d"},this.formItemLayout),T.a.createElement(K["a"],{style:{width:"100%"},value:E,placeholder:"\u8bf7\u9009\u62e9\u4f1a\u7c4d",onChange:this.handleMembership},T.a.createElement(J,{value:"1"},"\u4f1a\u7c4d1"),T.a.createElement(J,{value:"2"},"\u4f1a\u7c4d2"),T.a.createElement(J,{value:"3"},"\u4f1a\u7c4d3"))),T.a.createElement(q,h()({label:"\u7ecf\u529e\u4eba"},this.formItemLayout),T.a.createElement(s["a"],{placeholder:"\u8bf7\u8f93\u5165\u7ecf\u529e\u4eba",value:C,onChange:this.handleHandlingPerson})),T.a.createElement(q,h()({label:"\u539f\u56e0"},this.formItemLayout),T.a.createElement(s["a"].TextArea,{style:{verticalAlign:"top",width:"100%",height:100},placeholder:"\u8bf7\u8f93\u5165\u539f\u56e0",value:S,onChange:this.handleDistributionReason}))))}}]),t}(A["PureComponent"]),r=l))||r)||r);t["default"]=N}}]);